{
    "name": "${name}",
    "version": ${version},
    "containers": [
        {
            "name": "main",
            "systemd": {
                "unit-files": [
                    % for unit_file in context.get('unit_files', ()):
                    "${unit_file}"${'' if loop.last else ','}
                    % endfor
                ]
            }
        }
    ],
    "images": [
        % for image_name in sorted(images):
        {
            "id": "sha512-${images[image_name]['sha512']}",
            "path": "${images[image_name]['path']}"
        }${'' if loop.last else ','}
        % endfor
    ],
    "volumes": [
        % for volume in volumes:
        {
            "name": "${volume['name']}",
            "path": "${volume['path']}",
            % if 'data' in volume:
            "data": "${volume['data']}",
            % endif
            "read-only": ${'true' if volume.get('read_only', True) else 'false'}
        }${'' if loop.last else ','}
        % endfor
    ]
}
